<div class="product" *ngFor="let product of products">
    <div class="details">
        <p class="category">{{product.category}}</p>
        <h3 class="name">{{product.name}}</h3>
        <p class="description">{{product.description}}</p>
    </div>
    <div class="prod">
        <p class="stock">{{product.stock}}</p>
        <tui-money 
            currency="RD$" 
            [precision]="2" 
            decimal="always" 
            [value]="product.price"
        ></tui-money>
    </div>
    <div class="actions">
        <button (click)="delete(product.id)">
            <tui-marker-icon mode="error" src="tuiIconTrash"></tui-marker-icon>
        </button>
        <button (click)="showDialog()">
            <tui-marker-icon src="tuiIconEdit2"></tui-marker-icon>
        </button>
    </div>
    <ng-template
        let-observer
        [tuiDialogOptions]="{label: 'Updating product', size: 's'}"
        [(tuiDialog)]="open"
    >
        <form class="form" (ngSubmit)="edit(product.id)" [formGroup]="updateForm">
            <div class="inputs">
                <tui-input
                    tuiAutoFocus
                    formControlName="name"
                >
                </tui-input>
                <tui-input
                    tuiAutoFocus
                    formControlName="description"
                >
                    Description
                </tui-input>
                <tui-input
                    tuiAutoFocus
                    formControlName="category"
                >
                    Category
                </tui-input>
                <tui-input
                    tuiAutoFocus
                    formControlName="price"
                >
                    Price
                    <input
                        tuiTextfield
                        inputmode="numeric"
                        [value]="product.price"
                    />
                </tui-input>
            </div>
            <button tuiButton type="submit">Save changes</button>
        </form>
    </ng-template>
</div>